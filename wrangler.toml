# Cloudflare Pages Configuration
# https://developers.cloudflare.com/pages/functions/wrangler-configuration/

name = "akyodex-nextjs"
compatibility_date = "2025-01-22"
compatibility_flags = ["nodejs_compat"]

# Pages-specific settings
# OpenNext Cloudflare generates output in .open-next directory
pages_build_output_dir = ".open-next"

# KV Namespace and R2 Bucket bindings should be configured in Cloudflare Pages Dashboard
# This avoids deployment errors with placeholder IDs in wrangler.toml
# The actual bindings will be inherited from the Pages project settings

# [[kv_namespaces]]
# binding = "AKYO_KV"
# id = "YOUR_KV_NAMESPACE_ID"

# [[r2_buckets]]
# binding = "AKYO_BUCKET"
# bucket_name = "akyo-images"

# Environment variables for production
[env.production]
# These should be set in Cloudflare Pages dashboard:
# - GITHUB_TOKEN
# - GITHUB_REPO_OWNER = "rad-vrc"
# - GITHUB_REPO_NAME = "Akyodex"
# - GITHUB_BRANCH = "main"
# - ADMIN_PASSWORD_OWNER = "RadAkyo"
# - ADMIN_PASSWORD_ADMIN = "Akyo"
# - NEXT_PUBLIC_R2_BASE = "https://images.akyodex.com"

# KV and R2 bindings should be configured in Cloudflare Pages Dashboard
# [[env.production.kv_namespaces]]
# binding = "AKYO_KV"
# id = "YOUR_KV_NAMESPACE_ID"

# [[env.production.r2_buckets]]
# binding = "AKYO_BUCKET"
# bucket_name = "akyo-images"

[env.production.vars]
NODE_ENV = "production"

# Environment variables for preview
[env.preview]
# KV and R2 bindings should be configured in Cloudflare Pages Dashboard
# Commenting out for now to avoid deployment errors with placeholder IDs
# [[env.preview.kv_namespaces]]
# binding = "AKYO_KV"
# id = "YOUR_KV_NAMESPACE_ID"

# [[env.preview.r2_buckets]]
# binding = "AKYO_BUCKET"
# bucket_name = "akyo-images"

[env.preview.vars]
NODE_ENV = "preview"
