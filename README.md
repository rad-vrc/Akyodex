# Akyoずかん - 500種類以上のなぞの生き物を探索しよう

## 📚 プロジェクト概要

Akyoずかんは、500種類以上存在する「AKyo」というなぞの生き物たちを検索・閲覧できるファン向けの図鑑サイトです。子どもでも親しみやすいモダンなカードデザインで、ポケモン図鑑のような楽しい体験を提供します。

## 🎯 プロジェクトの目標

- AKyoファンが全種類のAKyoを簡単に検索・閲覧できる
- お気に入り機能で好きなAKyoをコレクション
- 属性や作者による詳細な分類と検索
- VRChatアバターへの直接リンク提供
- レスポンシブデザインでスマホ・タブレット対応

## ✨ 主な機能

### 🎆 現在実装済みの機能

1. **データ管理**
   - CSV形式のAKyoデータの読み込みと解析（data/akyo-data.csv または localStorage.akyoDataCSV）
   - クロスタブ同期：'akyoDataCSV' の更新を検知して自動リロード
   - IndexedDBによる大容量画像データの保存（数GB対応）

2. **表示モード**
   - **グリッドビュー**: カード形式で視覚的に表示（デフォルト）
   - **リストビュー**: 詳細情報を含む表形式表示
   - ワンクリックでビュー切り替え可能

3. **検索・フィルタリング機能**
   - **フリーワード検索**: ID、名前、属性、作者、備考から検索
   - **属性フィルター**: ドロップダウンで属性別に絞り込み
   - **クイックフィルター**:
     - ランダム表示（20体をランダムピックアップ）
     - お気に入りのみ表示
     - Quest対応アバターのみ表示

4. **詳細表示機能**
   - モーダルウィンドウで詳細情報を表示
   - 備考の完全表示（複数行対応）
   - VRChatアバターURLへの直接リンク

5. **お気に入り機能**
   - ワンクリックでお気に入り登録/解除
   - LocalStorageによる永続化（ブラウザを閉じても保持）
   - お気に入り数のリアルタイム表示

6. **統計情報**
   - 全AKyo数の表示
   - 現在表示中の件数
   - お気に入り登録数

7. **レスポンシブデザイン**
   - PC、タブレット、スマートフォンに完全対応
   - Tailwind CSSによるモダンなUI
   - 滑らかなアニメーション効果

8. **管理者機能**
   - 2階層認証システム（オーナー/管理者）
   - Akyoデータの追加・編集・削除
   - CSVインポート（ツールタブに統合）
   - 自動ID割り当て機能
   - ID自動圧縮・再採番機能

9. **デバッグツール**
   - データ状態のリアルタイム確認
   - ID割り当てロジックのテスト
   - 使用済みIDの可視化
   - デバッグログ表示

10. **子供向けデザイン** 🌈
    - パステルカラーの優しい配色
    - 丸みを帯びたデザイン要素
    - 楽しいアニメーション効果
    - 虹色グラデーション背景
    - 絵文字を活用した親しみやすいUI
    - カスタムロゴアップロード機能

## 🔗 機能別エントリーポイント

- `/index.html` - 図鑑（zukan）メインUI。CSV: data/akyo-data.csv または localStorage.akyoDataCSV
- `/admin.html` - 管理UI（タブ: 新規登録 / 編集・削除 / ツール（CSVインポート・ID再採番・エクスポート・統計））
- `/admin.html` - 管理UI（タブ: 新規登録 / 編集・削除 / ツール（CSVインポート・ID再採番・統計））

URLパラメータ（将来検討）

- `/?search={keyword}` - 検索キーワード指定
- `/?attribute={attr}` - 属性フィルター指定
- `/?id={akyoId}` - 特定AKyoの詳細表示

## 📊 データ構造

### CSVデータフォーマット

```csv
ID,見た目,通称,アバター名,属性,備考,作者,アバターURL
001,,オリジンAkyo,Akyo origin,チョコミント類,すべてのはじまり,ugai,https://vrchat.com/...
```

### 内部データモデル

```javascript
{
  id: string,           // 3桁のID番号
  appearance: string,   // 見た目（現在は空）
  nickname: string,     // 通称
  avatarName: string,   // アバター名
  attribute: string,    // 属性（カンマ区切りで複数可）
  notes: string,        // 備考（複数行対応）
  creator: string,      // 作者名
  avatarUrl: string,    // VRChatアバターURL
  isFavorite: boolean   // お気に入りフラグ
}
```

## 🚀 今後の実装予定機能

1. **高度な検索機能**
   - 複数条件の組み合わせ検索
   - 検索履歴の保存
   - サジェスト機能

3. **統計・分析ページ**
   - 属性別分布グラフ（Chart.js使用）
   - 作者別統計
   - 人気ランキング

4. **コレクション機能**
   - 取得済み/未取得の管理
   - コレクション進捗率表示
   - 達成バッジシステム

5. **共有機能**
   - SNS共有ボタン
   - お気に入りリストの共有URL生成
   - QRコード生成

6. **PWA化**
   - オフライン対応
   - ホーム画面追加
   - プッシュ通知（新AKyo追加時）

## 💻 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **CSSフレームワーク**: Tailwind CSS (CDN)
- **アイコン**: Font Awesome 6.4
- **フォント**: Google Fonts (Noto Sans JP, Kosugi Maru)
- **データ形式**: CSV → JSON変換
- **ストレージ**:
  - IndexedDB（画像Base64データの一次保存: object store 'images'）
  - LocalStorage（お気に入り、CSVデータ 'akyoDataCSV'、画像のフォールバック 'akyoImages'）
  - SessionStorage（認証情報 'akyoAdminAuth'）

## 📁 ファイル構成

```
/
├── index.html          # メインページ（図鑑）
├── admin.html          # 管理者ページ
├── (削除) image-manager.html  # 画像管理・編集ツール（削除済み）
├── (削除) bulk-upload.html    # 一括画像登録ツール（削除済み）
├── logo-upload.html    # アイコン設定ツール 🆙
├── migrate-storage.html # IndexedDB移行ツール
├── (削除) admin-import.html   # CSVインポートページ（削除済み）
├── test-indexeddb.html # IndexedDB確認ツール
├── test-debug.html     # デバッグツール
├── HOSTING-GUIDE.md    # ホスティングガイド 🆕
├── js/
│   ├── main.js        # 図鑑ページ用JavaScript
│   ├── admin.js       # 管理者ページ用JavaScript
│   ├── image-loader.js # 画像読み込み用JavaScript
│   ├── storage-manager.js # IndexedDB管理
│   └── storage-adapter.js # ストレージ互換レイヤー
├── css/
│   └── kid-friendly.css # 子ども向けデザインCSS
├── data/
│   └── akyo-data.csv  # Akyoデータ
└── README.md          # このファイル
```

## 🎨 デザインコンセプト

- **モダンカード式**: Material Design風の洗練されたカードUI
- **親しみやすい配色**: パープル×ブルーのグラデーション
- **直感的な操作**: 子どもでも使いやすいシンプルな操作性
- **視覚的な楽しさ**: 属性ごとの色分けとアニメーション

## 📝 開発者向け情報

### ローカル開発

1. すべてのファイルをWebサーバーに配置
2. `index.html`をブラウザで開く
3. CSVファイルは`data/akyo-data.csv`に配置
4. 管理機能は`admin.html`からアクセス
5. デバッグは`test-debug.html`で確認

### 管理者ログイン情報

- **オーナー権限**: `RadAkyo` - 全機能利用可能（削除含む）
- **管理者権限**: `Akyo` - 追加・編集のみ

### カスタマイズポイント

- 属性の色設定: `main.js`の`getAttributeColor()`関数
- カードデザイン: `main.js`の`createAkyoCard()`関数
- フィルター条件: 各種フィルター関数をカスタマイズ可能

## 🔄 更新履歴

### v2.3.1 (2025-09-24)

- 編集・削除: 初期表示で全Akyoを一覧表示（検索不要）
- ページ削除: image-manager.html と bulk-upload.html（および admin-import.html）を完全削除
- CSVインポート: MIME/拡張子判定を緩和し動作修正。ツールタブにCSVインポートUIを統合
- クロスタブ同期: main.jsにlocalStorage 'storage' リスナーを追加し、adminでの更新がzukanに自動反映
- 検索の堅牢化: 未定義フィールド参照で落ちないようnullガード
- ツール: データエクスポート項目を削除（CSVエクスポートは個別ツール化検討）
- 統計: 画像登録数をIndexedDB優先で集計するよう修正

### v2.3.0 (2025-01-24) 🚀

- 🔍 **検索ボックスのUI改善**
  - プレースホルダーテキストの位置調整
- 🎆 **モーダルの修正**
  - ×ボタンを固定位置に変更
  - スクロール時も常に表示
- 🌈 **アイコン設定機能の大幅改善**
  - 正方形固定で任意サイズに拡大縮小可能
  - プロフィールアイコン設定を追加
  - マウスホイールでサイズ調整
  - リサイズハンドル追加
- 📊 **一括アップロードの拡張**
  - 001-9999までのIDに対応
  - 4桁IDのサポート
- 🌐 **ホスティングガイド追加**
  - 無料ホスティングサービスの提案
  - Netlifyを使ったセットアップガイド

### v2.2.0 (2025-01-24) 🎊

- 🎨 **詳細モーダルのデザイン大幅改善**
  - 子どもにも親しみやすいポップなデザイン
  - アニメーション効果の追加
  - 絵文字を使った楽しいUI
  - スクロール問題の修正
- ✂️ **ロゴ切り抜き機能の改善**
  - 正方形固定で任意サイズに拡大縮小可能
  - マウスホイールでサイズ調整
  - リサイズハンドル追加
- 🎁 **ラベル変更**
  - 「おはなし」→「おまけ情報」に変更

### v2.2.0 (2025-01-24) 🌟

- 🎨 **子供向けUIの完成度向上**
  - 「詳細を見る」ボタンを「くわしく見る」に変更し、虹色グラデーションアニメーション追加
  - ボタンに星のアニメーションとバウンス効果を実装
  - ボタンホバー時に波紋エフェクトを追加
- 🖼️ **ロゴ表示機能の修正**
  - IndexedDBとlocalStorageの両方からロゴを読み込む機能を実装
  - ロゴ読み込みの信頼性向上（複数のタイミングで実行）
  - ロゴにフロートアニメーション効果を追加
- 🔧 **ストレージシステムの改善**
  - logo-upload.htmlがIndexedDBとlocalStorageの両方に保存するよう修正
  - ロゴ削除時も両方のストレージから削除するよう改善

### v2.1.0 (2025-01-24) 🎆

- 🖼️ **画像管理・編集ツール追加**
  - ID変更・入れ替え機能
  - 87番以降の一括修正機能
  - 連番チェック機能
  - 画像の個別編集・削除
- 🗑️ **不要ファイル削除**
  - LocalStorage関連の古いツールを削除
  - IndexedDB完全移行完了

### v2.0.0 (2025-01-24) 🌈

- ✨ **子どもにやさしいデザインに全面リニューアル**
  - パステル調の明るい色合い
  - 丸みを帯びたフォントとボタン
  - 楽しいアニメーション効果
  - 虹色のグラデーション
- 💾 **IndexedDB対応で容量制限を撤廃**
  - LocalStorage (5-10MB) → IndexedDB (数GB)
  - 大量の画像を保存可能
- 🚀 **一括画像登録ツール追加**
  - ドラッグ&ドロップ対応
  - 自動ID判定機能
- 🔐 **パスワード変更**
  - オーナー: `RadAkyo`
  - 管理者: `Akyo`

### v1.1.0 (2025-01-24)

- 🎆 「Akyo図鑑」から「Akyoずかん」へ名称変更
- 🔧 自動ID割り当て機能の修正と改善
- 🔍 デバッグツールの追加
- 🖼️ ID 001-020のハードコード画像を削除
- 🛠️ ID自動圧縮機能の実装

### v1.0.0 (2025-01-23)

- 初期リリース
- 基本的な検索・表示機能実装
- お気に入り機能追加
- レスポンシブデザイン対応

## 📝 開発メモ

- CSVの永続化は localStorage.akyoDataCSV。未設定時は data/akyo-data.csv をフェッチ
- 画像はIndexedDB優先で保存し、フォールバックにlocalStorage.akyoImages
- 自動ID割り当ては001-020を優先的に使用
- ID削除時は自動で後続IDを詰める（お気に入り・画像のIDマップも更新）

## 🚀 次の開発推奨事項

1. **検索機能の強化**
   - 複数条件のAND/OR検索
   - 検索履歴の保存
   - サジェスト機能の実装

2. **パフォーマンス最適化**
   - 仮想スクロールの実装
   - 画像の遅延読み込み
   - WebP形式での画像保存

3. **ユーザー体験の向上**
   - PWA化によるオフライン対応
   - ダークモード対応
   - 音声検索機能
   - ゲーミフィケーション要素（バッジ、実績など）

4. **管理機能の拡充**
   - 画像の一括エクスポート/インポート（別ツールとして再設計する場合は要検討）
   - バックアップ・リストア機能
   - 変更履歴の記録

## 📧 お問い合わせ

Akyoずかんに関するご意見・ご要望は、プロジェクト管理者までお願いします。

---

公開URL/デプロイ

- デプロイはPublishタブから行ってください（ワンクリックで公開できます）

データモデル/ストレージまとめ

- CSV: data/akyo-data.csv または localStorage.akyoDataCSV
- 画像: IndexedDB 'images'（フォールバック localStorage.akyoImages）
- 認証: sessionStorage.akyoAdminAuth

**Akyoずかん** - すべてのAKyoファンのために 💜
