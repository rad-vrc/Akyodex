---
inclusion: always
---

# ファイル削除ガイドライン

## 重要ルール

### ❌ 以下の場合はファイルを削除しない:
- 使用状況の検証が不完全 (インポート、動的インポート、テスト)
- 100%未使用であると確信できない
- ユーザーが削除を承認していない
- システムファイル (`node_modules/`, `.git/`, 設定ファイル)

### ✅ 削除前の必須チェック

1. **すべての使用箇所を検索**:
   ```bash
   grepSearch: "filename"
   grepSearch: "from.*filename|import.*filename"
   grepSearch: "import\\(.*filename"
   ```

2. **間接的な依存関係を確認**: ファイルは他のファイルを通じてインポートされている可能性がある

3. **ビルドを実行**: `npm run build`でエラーをキャッチ

4. **ユーザーの承認を得る**: 理由、影響を説明し、明示的な確認を得る

### 🚨 過去の失敗例: github-utils.ts

- `csv-utils.ts`が`github-utils.ts`をインポート
- `akyo-crud-helpers.ts`が`csv-utils.ts`経由で間接的に使用
- 不十分な検索により誤って「未使用」と判断
- **結果**: ビルドエラー、CRUD操作の破損、Gitリストアが必要に

**教訓**: 削除前に必ず間接的な依存関係を確認し、ビルドを実行する

## 正しい削除プロセス

1. すべての使用箇所を徹底的に検索
2. 間接的な依存関係がないことを確認
3. `npm run build`と`npm run test`を実行
4. 明確な説明とともにユーザーの承認を求める
5. ファイルを削除
6. ビルドが正常に動作することを確認

## まとめ

**ファイル削除には慎重に:**
- ✅ 徹底的に検索する
- ✅ ビルドで検証する
- ✅ ユーザーの承認を得る
- ❌ 推測に基づいて削除しない
- ❌ ユーザーの確認なしに削除しない
