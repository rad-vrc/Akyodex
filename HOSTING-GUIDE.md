# 🌐 Akyoずかん ホスティングガイド

## 📌 推奨ホスティングサービス（重要な前提）

このリポジトリは、管理機能（Akyoの追加・編集・削除、画像アップロード）を **Cloudflare Pages Functions + KV + R2** で実装しています。

- 🔒 管理機能… Cloudflare モードでのみ動作（Pages Functions + R2 + KV が必須）
- 👀 閲覧のみ… どの静的ホスティングでもOK（Netlify / Vercel / GitHub Pages など）

以下の各サービス紹介は「閲覧専用モード」での公開を想定しています。管理機能を使うサイト運用は Cloudflare Pages を選んでください。

Akyodex.comドメインでWebサイトを公開するための、**無料〜低コストでおすすめのホスティングサービス**をご紹介します。

---

## 🎯 おすすめ第1位: Netlify（ネットリファイ）

### ✨ メリット
- **完全無料**で始められる（月100GBまで）
- **独自ドメイン設定無料**（Akyodex.comを無料で使える）
- **SSL証明書自動発行**（https://が無料）
- **デプロイが超簡単**（ドラッグ&ドロップでOK）
- **自動デプロイ**（GitHubと連携可能）
- **高速CDN**（世界中から高速アクセス）
- **日本語サポートあり**

### 🚀 セットアップ手順
1. [Netlify](https://www.netlify.com/)にアクセスして無料アカウント作成
2. プロジェクトファイルをZIPにまとめる
3. Netlifyダッシュボードにドラッグ&ドロップ
4. 即座に公開完了！
5. Domain Settingsから「Add custom domain」でAkyodex.comを追加

### 💰 料金
- **Starter（無料）プラン**: 月100GB帯域、300分ビルド時間
- 十分な容量で、Akyoずかんなら問題なく運用可能

---

## 🥈 おすすめ第2位: Vercel（ヴァーセル）

### ✨ メリット
- **完全無料**の個人利用プラン
- **独自ドメイン設定無料**
- **超高速**（エッジネットワーク）
- **自動HTTPS**
- **プレビュー機能**あり
- **分析ツール付き**

### 🚀 セットアップ手順
1. [Vercel](https://vercel.com/)で無料アカウント作成
2. GitHubリポジトリと連携またはファイルアップロード
3. 自動でデプロイ完了
4. Domainsセクションでakyodex.comを追加

### 💰 料金
- **Hobby（無料）プラン**: 個人利用なら制限なし

---

## 🥉 おすすめ第3位: GitHub Pages

### ✨ メリット
- **完全無料**
- **GitHubアカウントがあればOK**
- **カスタムドメイン対応**
- **安定性抜群**

### ⚠️ 注意点
- リポジトリが公開される（プライベートは有料）
- 月100GB帯域制限

### 🚀 セットアップ手順
1. GitHubでリポジトリ作成
2. ファイルをアップロード
3. Settings → PagesでGitHub Pages有効化
4. Custom domainにakyodex.comを設定

---

## 🌍 ドメイン取得について

### Akyodex.com取得先おすすめ

#### 1. **Namecheap**（ネームチープ）
- **最安級**: 年額約$9.00（約1,400円）
- **初年度割引**あり
- **Whois保護無料**
- **日本語サポートなし**（英語のみ）

#### 2. **Google Domains**（グーグルドメインズ）
- **年額$12（約1,800円）**
- **シンプルで使いやすい**
- **Whois保護無料**
- **Googleアカウントで管理**

#### 3. **お名前.com**（日本）
- **年額1,408円〜**（.comドメイン）
- **日本語完全対応**
- **サポート充実**
- ※更新料金に注意（2年目以降高くなることがある）

---

## 📝 DNS設定方法（閲覧専用モード想定）

ドメインを取得したら、ホスティングサービスに向けてDNS設定を行います。

### Netlifyの場合
```
Type: CNAME
Name: @（またはwww）
Value: [your-site-name].netlify.app
```

### Vercelの場合
```
Type: A
Name: @
Value: 76.76.21.21
```

### GitHub Pagesの場合
```
Type: CNAME
Name: www
Value: [username].github.io
```

---

## 🖼️ 公開時の画像の扱い（重要）

このサイトはブラウザ内ストレージ（IndexedDB/LocalStorage）を優先して画像を表示しますが、公開環境（Netlifyなど）では新規訪問者の端末に画像が入っていないため、そのままだと表示されません。そこで、以下のフォールバックを実装しています。

- 画像は `images/{ID}.jpg` を自動で探します（例: `images/001.jpg`）。
- 画像が見つからない場合はID入りのプレースホルダーが表示されます。

### 推奨運用フロー（Netlify）
1. プロジェクト直下に `images/` フォルダを作成
2. 画像ファイルを `001.jpg` のように3桁IDで保存
3. Netlifyにデプロイ（ZIPドラッグ&ドロップまたはGit連携）

これで新規訪問者も即時に画像が表示されます。

### 新しく登録されるAkyoの画像対応
- 管理者ページで新規登録時に作成した画像（トリミング結果）をリポジトリの `images/{ID}.jpg` として追加し、再デプロイしてください。
- 自動アップロード先のサーバーは本プロジェクトには含まれていません（Netlifyは静的ホスティングのため）。運用上は「画像を `images/` に追加→再デプロイ」で対応します。
- オプション: 画像をCloudinary/Imgur/S3などの外部CDNに置き、`js/image-loader.js` のマッピングや `localStorage.akyoImages` にURLを入れて運用することも可能です。

注意: 画像のファイル名は拡張子 `.jpg` を想定しています。PNGなどを使う場合は同名JPGに変換するか、`js/image-loader.js` のフォールバックロジックを変更してください。

---

## ♻️ デザイン変更時のキャッシュ更新ルール

`css/kid-friendly.css` と `images/akyo-bg.webp` を更新した際は、ブラウザやCDNのキャッシュを確実に更新するため、以下の値を同時に上げてください。

- `sw.js` の `CSS_VERSION`
- 各HTMLの `css/kid-friendly.css?v=...` クエリ（ビルド済みファイルを直接編集する場合）
- `css/kid-friendly.css` 内の `akyo-bg.webp?v=...` 指定

また、`sw.js` の `PRECACHE` 定数も必要に応じて increment し、古いプリキャッシュを破棄できるようにします。Cloudflare Pages など主要なCDNではクエリストリングがキャッシュキーに含まれるため、この運用で最新の背景画像が即時に反映されます。

---

## 💡 おすすめの組み合わせ

### 🏆 **最もおすすめ**: Netlify + Namecheap
- **初期費用**: 約1,400円（ドメイン代のみ）
- **月額費用**: 0円
- **年間費用**: 約1,400円のみ

### メリット
- 最小コストで本格的なWebサイト運営が可能
- 設定が簡単で初心者にも優しい
- 十分な性能と機能

---

## 🔧 セットアップサポート

### ステップバイステップガイド

1. **ドメイン取得**（15分）
   - Namecheapでakyodex.comを購入
   - アカウント作成と支払い

2. **Netlifyセットアップ**（10分）
   - アカウント作成
   - プロジェクトファイルをZIPに圧縮
   - ドラッグ&ドロップでアップロード

3. **DNS設定**（30分）
   - NetlifyのDomain Settings確認
   - NamecheapでDNS設定
   - SSL証明書の自動発行を待つ

4. **完了！**
   - https://akyodex.com でアクセス可能に！

---

## ❓ よくある質問

### Q: 本当に無料で運用できる？
**A**: はい！ドメイン代（年1,400円程度）以外は完全無料です。

### Q: アクセスが増えても大丈夫？
**A**: Netlifyは月100GBまで無料。Akyoずかんなら十分です。

### Q: SSL（https）は必要？
**A**: 必須です！でもNetlifyなら自動で無料設定されます。

### Q: 更新作業は簡単？
**A**: とても簡単！ファイルを更新してドラッグ&ドロップするだけ。

### Q: バックアップは？
**A**: ローカルにファイルを保存しておけばOK。GitHubと連携すれば自動バックアップも可能。

---

## 📞 困ったときは

1. **Netlifyサポート**
   - [公式ドキュメント](https://docs.netlify.com/)
   - コミュニティフォーラム

2. **日本語情報**
   - Qiitaの記事を検索
   - Zennの記事を検索

3. **ChatGPT/Claude**
   - エラーメッセージをコピペして質問
   - 「Netlifyで〜する方法」で質問

---

## ✅ チェックリスト

- [ ] ドメイン名決定（akyodex.com）
- [ ] ドメイン登録サービス選択
- [ ] ホスティングサービス選択（Netlify推奨）
- [ ] プロジェクトファイルの準備
- [ ] ドメイン購入
- [ ] ホスティング設定
- [ ] DNS設定
- [ ] SSL証明書確認
- [ ] 動作テスト
- [ ] 🎉 公開完了！

---

## 🎊 まとめ

**Netlify + Namecheap**の組み合わせなら、**年額約1,400円**という最小コストで、プロフェッショナルなWebサイトを運営できます。技術的な知識がなくても、このガイドに従えば簡単にセットアップ可能です。

Akyoずかんを世界に公開する準備は整いました！頑張ってください！🚀
